{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/rames/Documents/My Projects/Task Manager System/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/rames/Documents/My Projects/Task Manager System/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/rames/Documents/My Projects/Task Manager System/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{Link}from\"react-router-dom\";import'../Navbar.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Update=function Update(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];function getData(){return _getData.apply(this,arguments);}function _getData(){_getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response,result;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"http://localhost:5000\");case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:result=_context2.sent;if(!response.ok){console.log(result.error);setError(result.error);}else{setData(result);}_context2.next=14;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.error(\"Error fetching data:\",_context2.t0);setError(\"Failed to fetch data\");case 14:case\"end\":return _context2.stop();}},_callee2,null,[[0,10]]);}));return _getData.apply(this,arguments);}var handleDelete=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id){var response,result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"http://localhost:5000/\".concat(id),{method:\"DELETE\"});case 3:response=_context.sent;_context.next=6;return response.json();case 6:result=_context.sent;if(!response.ok){console.log(result.error);setError(result.error);}else{setError(\"Data removed successfully\");setTimeout(function(){setError(\"\");getData();},1000);}_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.error(\"Error deleting data:\",_context.t0);setError(\"Failed to delete data\");case 14:case\"end\":return _context.stop();}},_callee,null,[[0,10]]);}));return function handleDelete(_x){return _ref.apply(this,arguments);};}();useEffect(function(){getData();},[]);console.log(data);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:error}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"Show all data\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:data&&data.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"column\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Task\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Deadline\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data.map(function(ele,index){var deadlineDate=new Date(ele.deadline);var formattedDeadline=deadlineDate.toISOString().split(\"T\")[0];return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:ele.task}),/*#__PURE__*/_jsx(\"td\",{children:ele.description}),/*#__PURE__*/_jsx(\"td\",{children:formattedDeadline}),/*#__PURE__*/_jsx(\"td\",{children:ele.status}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"a\",{className:\"card-link\",onClick:function onClick(){return handleDelete(ele._id);},children:\"Delete\"}),/*#__PURE__*/_jsx(Link,{to:\"/\".concat(ele._id),className:\"card-link\",children:\"Edit\"})]})]},ele._id);})})]})}):/*#__PURE__*/_jsx(\"p\",{children:\"Loading data...\"})})]});};export default Update;","map":{"version":3,"names":["React","useEffect","useState","Link","jsx","_jsx","jsxs","_jsxs","Update","_useState","_useState2","_slicedToArray","data","setData","_useState3","_useState4","error","setError","getData","_getData","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","response","result","wrap","_callee2$","_context2","prev","next","fetch","sent","json","ok","console","log","t0","stop","handleDelete","_ref","_callee","id","_callee$","_context","concat","method","setTimeout","_x","className","children","length","map","ele","index","deadlineDate","Date","deadline","formattedDeadline","toISOString","split","scope","task","description","status","onClick","_id","to"],"sources":["C:/Users/rames/Documents/My Projects/Task Manager System/frontend/src/components/Update.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport '../Navbar.css';\r\n\r\n\r\nconst Update = () => {\r\n  const [data, setData] = useState([]);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  async function getData() {\r\n    try {\r\n      const response = await fetch(\"http://localhost:5000\");\r\n      const result = await response.json();\r\n\r\n      if (!response.ok) {\r\n        console.log(result.error);\r\n        setError(result.error);\r\n      } else {\r\n        setData(result);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n      setError(\"Failed to fetch data\");\r\n    }\r\n  }\r\n\r\n  const handleDelete = async (id) => {\r\n    try {\r\n      const response = await fetch(`http://localhost:5000/${id}`, {\r\n        method: \"DELETE\",\r\n      });\r\n\r\n      const result = await response.json();\r\n      if (!response.ok) {\r\n        console.log(result.error);\r\n        setError(result.error);\r\n      } else {\r\n        setError(\"Data removed successfully\");\r\n\r\n        setTimeout(() => {\r\n          setError(\"\");\r\n          getData();\r\n        }, 1000);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error deleting data:\", error);\r\n      setError(\"Failed to delete data\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getData();\r\n  }, []);\r\n\r\n  console.log(data);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      {error && <div className=\"alert alert-danger\">{error}</div>}\r\n      <h2 className=\"text-center\">Show all data</h2>\r\n      <div className=\"row\">\r\n        {data && data.length > 0 ? (\r\n          <div className=\"column\">\r\n            <table className=\"table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>#</th>\r\n                  <th>Task</th>\r\n                  <th>Description</th>\r\n                  <th>Deadline</th>\r\n                  <th>Status</th>\r\n                  <th>Action</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {data.map((ele, index) => {\r\n                  const deadlineDate = new Date(ele.deadline);\r\n                  const formattedDeadline = deadlineDate\r\n                    .toISOString()\r\n                    .split(\"T\")[0];\r\n\r\n                  return (\r\n                    <tr key={ele._id}>\r\n                      <th scope=\"row\">{index + 1}</th>\r\n                      <td>{ele.task}</td>\r\n                      <td>{ele.description}</td>\r\n                      <td>{formattedDeadline}</td>\r\n                      <td>{ele.status}</td>\r\n                      <td>\r\n                        <a className=\"card-link\" onClick={() => handleDelete(ele._id)}>\r\n                          Delete\r\n                        </a>\r\n                        <Link to={`/${ele._id}`} className=\"card-link\">Edit</Link>\r\n                      </td>\r\n                    </tr>\r\n                  );\r\n                })}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        ) : (\r\n          <p>Loading data...</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Update;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}