{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/rames/Documents/My Projects/Task Manager System/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/rames/Documents/My Projects/Task Manager System/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/rames/Documents/My Projects/Task Manager System/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/rames/Documents/My Projects/Task Manager System/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import'../Navbar.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var List=function List(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var updateStatus=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(taskId,newStatus){var response,result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"http://localhost:5000/\".concat(taskId),{method:\"PATCH\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({status:newStatus})});case 3:response=_context.sent;_context.next=6;return response.json();case 6:result=_context.sent;if(!response.ok){console.log(result.error);setError(result.error);}else{// When update is successful, updating the status in the local data state\nsetData(function(prevData){return prevData.map(function(task){return task._id===taskId?_objectSpread(_objectSpread({},task),{},{status:newStatus}):task;});});}_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.error(\"Error updating status:\",_context.t0);setError(\"Failed to update status\");case 14:case\"end\":return _context.stop();}},_callee,null,[[0,10]]);}));return function updateStatus(_x,_x2){return _ref.apply(this,arguments);};}();function getData(){return _getData.apply(this,arguments);}function _getData(){_getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response,result;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"http://localhost:5000\");case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:result=_context2.sent;if(!response.ok){console.log(result.error);setError(result.error);}else{setData(result);}_context2.next=14;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.error(\"Error fetching data:\",_context2.t0);setError(\"Failed to fetch data\");case 14:case\"end\":return _context2.stop();}},_callee2,null,[[0,10]]);}));return _getData.apply(this,arguments);}useEffect(function(){getData();},[]);console.log(data);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:error}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"Show all data\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:data&&data.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"column\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Task\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Deadline\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data.map(function(ele,index){var deadlineDate=new Date(ele.deadline);var formattedDeadline=deadlineDate.toISOString().split(\"T\")[0];return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:ele.task}),/*#__PURE__*/_jsx(\"td\",{children:ele.description}),/*#__PURE__*/_jsx(\"td\",{children:formattedDeadline}),/*#__PURE__*/_jsx(\"td\",{children:ele.status})]},ele._id);})})]})}):/*#__PURE__*/_jsx(\"p\",{children:\"Loading data...\"})})]});};export default List;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","List","_useState","_useState2","_slicedToArray","data","setData","_useState3","_useState4","error","setError","updateStatus","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","taskId","newStatus","response","result","wrap","_callee$","_context","prev","next","fetch","concat","method","headers","body","JSON","stringify","status","sent","json","ok","console","log","prevData","map","task","_id","_objectSpread","t0","stop","_x","_x2","apply","arguments","getData","_getData","_callee2","_callee2$","_context2","className","children","length","ele","index","deadlineDate","Date","deadline","formattedDeadline","toISOString","split","scope","description"],"sources":["C:/Users/rames/Documents/My Projects/Task Manager System/frontend/src/components/List.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport '../Navbar.css';\r\n\r\n\r\nconst List = () => {\r\n  const [data, setData] = useState([]);\r\n  const [error, setError] = useState(\"\");\r\n\r\n\r\n  const updateStatus = async (taskId, newStatus) => {\r\n    try {\r\n      const response = await fetch(`http://localhost:5000/${taskId}`, {\r\n        method: \"PATCH\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ status: newStatus }),\r\n      });\r\n      const result = await response.json();\r\n\r\n      if (!response.ok) {\r\n        console.log(result.error);\r\n        setError(result.error);\r\n      } else {\r\n        // When update is successful, updating the status in the local data state\r\n        setData((prevData) =>\r\n          prevData.map((task) =>\r\n            task._id === taskId ? { ...task, status: newStatus } : task\r\n          )\r\n        );\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error updating status:\", error);\r\n      setError(\"Failed to update status\");\r\n    }\r\n  };\r\n\r\n  async function getData() {\r\n    try {\r\n      const response = await fetch(\"http://localhost:5000\");\r\n      const result = await response.json();\r\n\r\n      if (!response.ok) {\r\n        console.log(result.error);\r\n        setError(result.error);\r\n      } else {\r\n        setData(result);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n      setError(\"Failed to fetch data\");\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    getData();\r\n  }, []);\r\n\r\n  console.log(data);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      {error && <div className=\"alert alert-danger\">{error}</div>}\r\n      <h2 className=\"text-center\">Show all data</h2>\r\n      <div className=\"row\">\r\n        {data && data.length > 0 ? (\r\n          <div className=\"column\">\r\n            <table className=\"table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>#</th>\r\n                  <th>Task</th>\r\n                  <th>Description</th>\r\n                  <th>Deadline</th>\r\n                  <th>Status</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {data.map((ele, index) => {\r\n                  const deadlineDate = new Date(ele.deadline);\r\n                  const formattedDeadline = deadlineDate\r\n                    .toISOString()\r\n                    .split(\"T\")[0];\r\n\r\n                  return (\r\n                    <tr key={ele._id}>\r\n                      <th scope=\"row\">{index + 1}</th>\r\n                      <td>{ele.task}</td>\r\n                      <td>{ele.description}</td>\r\n                      <td>{formattedDeadline}</td>\r\n                      <td>{ele.status}</td>\r\n                    </tr>\r\n                  );\r\n                })}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        ) : (\r\n          <p>Loading data...</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default List;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}